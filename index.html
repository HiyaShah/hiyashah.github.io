<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <title>Hiya Shah</title>
    <script>
      window.MathJax = {
        tex: {
          // enable inline $...$ and \( ... \)
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        chtml: { matchFontHeight: false }  // optional: more consistent vertical spacing
      };
    </script>
    <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

</head>
<body>
    <div class="grid-2">
        <div class="section-1">
          <img src="img\WebsiteIcon.jpeg" alt="Me!" class="profile-image">
            <h2>Hiya Shah</h2>
            <h3>hiyashah.github.io</h3>
            <!-- <a href="https://instagram.com/kalieching?igshid=1jtw1vrlcdcv4"><i class="fab fa-instagram"></i></a> -->
            <!-- <a href="https://www.linkedin.com/in/kalie-ching/"><i class="fab fa-linkedin"></i></a> -->
            <a href="https://github.com/hiyashah"><i class="fab fa-github"></i></a>
        </div>
        <div class="section-2">
            <details class="portfolio-container">
              <summary>about ‚ú©‚ÇäÀö.‚ãÜ‚òæ‚ãÜ‚Å∫‚Çä‚úß</summary>
              <div class="dropdown-container">
                <p></p>
                <p>Hi everyone! My name is Hiya Shah, and I am a 4th year studying Electrical Engineering and Computer Science at Berkeley. I'm taking cs180, and this is my portfolio! 
                <p>If you'd like to chat üìß: hiyashah (at) berkeley.edu</p>
              </div>
            </details>

            <details class="portfolio-container">
              <summary>cs180 project 0 ‚úê·ù∞.</summary>
              <p></p>
              <div class="project-container">
                <h4>Part 1: Selfie: The Wrong Way vs. The Right Way</h4>
                <div class="image-row">
                    <img src="img/proj0/selfie_close.png" alt="Description for image 1">
                    <img src="img/proj0/selfie_far.png" alt="Description for image 2">
                </div>
                <p class="caption">I think the righthand photo (farther distance + zoom) looks significantly better than the lefthand photo (closeup) due to perspective distortion. </p>
                <p class="caption">The lefthand photo looks warped by exaggerating features closest to the camera like the nose and deprioritizing the ears.</p>
                <p class="caption">The righthand photo increases the distance from camera to subject and captures the proportions more naturally.</p>
                <h4>Part 2: Architectural Perspective Compression</h4>
                <div class="image-row">
                    <img src="img/proj0/path_zoom.png" alt="Description for image 3">
                    <img src="img/proj0/path_depth.png" alt="Description for image 4">
                </div>
                <p class="caption">I think the righthand photo (no zoom, walking along path) looks better than the lefthand photo (zoomed in) due to perspective compression.</p>
                <p class="caption">The lefthand photo looks flattened because I started at the beginning of a walking path and zoomed in on the distant bend, so from my vantage point, the distance between the objects seem less significant, causing a compressed look.</p>
                <p class="caption">The righthand photo narrows and exhibits a greater level of depth because I am a shorter distance away from the crack in the path, so it expands the elements along the path and creates a feel of depth.</p>
                <h4>Part 3: The Dolly Zoom</h4>
                <div class="single-image-container">
                    <img src="img/proj0/dolly_effect2.gif" alt="Description for the GIF">
                </div>
                <p class="caption">Dolly zoom effect on a Frog Bank stuffed animal.</p>

              </div>
              <div class="art-grid">
                <div id="art-popup" class="popup">
                  <img class="popup-art" src="img/proj1/single_scale/extra_eleven_yurt.jpg" alt="Full-size image">
                </div>
                <div id="art-popup" class="popup">
                  <img class="popup-art" src="img/proj1/single_scale/extra_eleven_yurt.jpg" alt="Full-size image">
                </div>
                <div id="art-popup" class="popup">
                  <img class="popup-art" src="img/proj1/single_scale/extra_eleven_yurt.jpg" alt="Full-size image">
                </div>
                <div id="art-popup" class="popup">
                  <img class="popup-art" src="img/proj1/single_scale/extra_eleven_yurt.jpg" alt="Full-size image">
                </div>
                <div id="art-popup" class="popup">
                  <img class="popup-art" src="img/proj1/single_scale/extra_eleven_yurt.jpg" alt="Full-size image">
                </div>
              </div> 
            
              <!-- Art Popup -->
              
            </details>

            <details class="portfolio-container" open>
              <summary>cs180 project 1 [‚óâ¬Ø] .ñ•î ›Å Àñ</summary>
              <h2>Images of the Russian Empire: Colorizing the Prokudin‚ÄìGorskii Collection</h2>
              <div class="project-container">
                
                <h3>Project Description</h3>
                <p class="caption">
                  My goal is to reconstruct full-color representations of the Prokudin-Gorskii glass plate collection by aligning and overlaying three monochrome channels (B, G, R) into a single color image (particularly, aligning the G and R channels). 
                  Each input plate contains a tall image with three stacked exposures, all grayscale.
                  My core challenge was alignment as each of the exposures were taken sequentially, resulting in small shifts in either the objects being captured or due to the motion of the camera, which caused color fringing.
                  To reconstruct color images, I implemented single-scale alignment with exhaustive search, multiscale pyramid, and auto-cropping to remove border whitespaces and color fringes utilizing Sobel and smoothing.
                  
                </p>

                <h3>Methods</h3>
                <h4>1. Single-Scale Alignment (Small .jpg images)</h4>
                <p class="caption">
                  I split the input plate into three equal B/G/R channel tiles by one-third height each. Prior to aligning the G and R channels, I removed the roll-wrap rims by cropping a fixed-fraction from all sides (I played around with this), resulting in cropping 12% from each border, keeping the central 76%. 
                  Then, I conducted exhaustive displacement search by evaluating each integer displacement within a window of [-15,15] pixels in the x- and y-dimension \( (dy, dx) \in [-15, 15] \times [-15, 15] \). I utilized and sought to maximize Normalized Cross-Correlation Similarity Metric for the image matching scoring. I tracked the best score and displacement, and applied them to the uncropped channels. I applied the shifts using np.roll, scoring only using the cropped interior as mentioned earlier. 
                  I selected the shift with the highest NCC score, applied that to the full-res image, and stacked the channels into a color image. Lastly, I applied the auto-border crop to remove the white and colored rims, whose method I've outlined in part three below
                  Prior to utilizing NCC, I at first tried using the L2 Norm (Euclidean Distance), but that resulted in misalignment as one can see on the monastery below. 
                  I believe that NCC performed better than L2 as the similarity metric because the R, G, B exposures may have different brightness distributions, and L2 penalizes the pixel intensity differences while the NCC subtracts the mean and normalizes both channels before comparing them. The larger error produced by the L2 metric due to brightness differences could bias the alignment.
                </p>
                <div class="double-grid" style="
                  display: flex;
                  flex-wrap: wrap;
                  gap: 16px;
                ">
                  <figure style="flex: 1 1 calc(50% - 16px); max-width: calc(50% - 16px); margin: 0;">
                    <img src="img/proj1/single_scale/monastery_old.jpg" alt="cathedral"
                        style="width: 100%; height: auto; display: block;">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      Before: monastery.jpg (L2 similarity)
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(50% - 16px); max-width: calc(50% - 16px); margin: 0;">
                    <img src="img/proj1/single_scale/monastery.jpg" alt="monastery"
                        style="width: 100%; height: auto; display: block;">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      After: monastery.jpg (NCC similarity) + auto-crop
                    </figcaption>
                  </figure>
                </div>

               

                <h4>2. Multi-Scale Alignment using Gaussian Pyramid (Large .tif images)</h4>
                <p class="caption">
                  For larger (.tif) images, I constructed a Gaussian pyramid for each channel by convolving with a Gaussian kernel of size 5 x 5 and std. deviation of 1 pixel before downsampling by 
                  factor of 2 per level by taking the alternate rows and columns. I repeated this process recursively until the smallest dimension fell below 100 pixels so that the operation isn't too expensive. At the coursest resolution, I performed the above exhaustive search to estimate 
                  the translation that would maximize NCC similarity metric relative to the blue channel. I doubled the course displacement to map it onto the coordinates of the next finer resolution, and I refined the alignment by doing a local search around a 2-pixel window of the estimate. I repeated this until I reached the original resolution.
                  For all of the displacement candidates, I scored them using the NCC similarity metric. However, just for emir, it seemed like the brightness differences between channels were large, so I aligned this particular image on gradient magnitude features computed via the Sobel operator (see below). Finally, I applied the displacements to the G and R channels and cropped away the non-overlapping margins. I found that using a pyramid reduced the search cost for .tif images, allowing all .tif images to run in just a few seconds each.
                </p>

                <!-- <div class="double-grid" style="
                  display: flex;
                  flex-wrap: wrap;
                  gap: 16px;
                ">
                  <figure style="flex: 1 1 calc(50% - 16px); max-width: calc(50% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/emir_old.jpg" alt="cathedral"
                        style="width: 100%; height: auto; display: block;">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      Before: emir.jpg (Pyramind w/ NCC similarity metric)
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(50% - 16px); max-width: calc(50% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/emir.jpg" alt="monastery"
                        style="width: 100%; height: auto; display: block;">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      After: emir.jpg (Pyramid w/ Gradient Magnitude metric)
                    </figcaption>
                  </figure>
                </div> -->

                <div class="triple-grid" style="
                  display: flex;
                  flex-wrap: wrap;
                  gap: 16px;
                ">
                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/emir_older.jpg" alt="church"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      emir.jpg (Pyramid with L2 Metric)
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/emir_old.jpg" alt="emir"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      emir.jpg (Pyramid with NCC metric)
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/emir.jpg" alt="harvesters"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      emir.jpg (Pyramid with Gradient Magnitude metric)
                    </figcaption>
                  </figure>
                </div>

                <h4>3. Auto-Cropping (All images)</h4>
                <p class="caption">
                  I auto-cropped color rims and black-and-white borders that remained post-aligning the channels by utilizing Edge Energy, which I read about in this paper, <a href="https://ieeexplore.ieee.org/document/1273918">"Learning to Detect Natural Image Boundaries
                    Using Local Brightness, Color, and Texture Cues"</a>. I first normalized the reconstructed RGB image for consistent intensity across the image, converted to grayscale by averaging across RGB channels, and applied Sobel gradient filter to create a map of local gradient-magnitude based edge strengths. 
                    I computed row-wise and column-wise means of the gradient magnitude map, and smoothed using a moving average filter. I crop away the rows and columns that exceed an "edge energy" threshold. I also added an 8-pixel padding margin to the cropped image to remove the remaining color fringing.
                </p>

                <div class="double-grid" style="
                  display: flex;
                  flex-wrap: wrap;
                  gap: 16px;
                ">
                  <figure style="flex: 1 1 calc(50% - 16px); max-width: calc(50% - 16px); margin: 0; border: 1px solid black;">
                    <img src="img/proj1/pyramid/melons_old.jpg" alt="cathedral"
                        style="width: 100%; height: auto; display: block;">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      Before: melons.jpg (Uncropped)
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(50% - 16px); max-width: calc(50% - 16px); margin: 0; border: 1px solid black;">
                    <img src="img/proj1/pyramid/melons.jpg" alt="monastery"
                        style="width: 100%; height: auto; display: block;">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      After: emir.jpg (Auto-Cropped)
                    </figcaption>
                  </figure>
                </div>


                <h3>Final Colorization Results</h3>
                <h4>Small Images (Single-Scale)</h4>
                <div class="triple-grid" style="
                display: flex;
                flex-wrap: wrap;
                gap: 16px;
              ">
                <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                  <img src="img/proj1/single_scale/cathedral.jpg" alt="cathedral"
                      style="width: 100%; height: auto; display: block; ">
                  <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                    cathedral.jpg
                  </figcaption>
                </figure>

                <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                  <img src="img/proj1/single_scale/monastery.jpg" alt="monastery"
                      style="width: 100%; height: auto; display: block; ">
                  <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                    monastery.jpg
                  </figcaption>
                </figure>

                <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                  <img src="img/proj1/single_scale/tobolsk.jpg" alt="tobolsk"
                      style="width: 100%; height: auto; display: block; ">
                  <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                    tobolsk.jpg
                  </figcaption>
                </figure>
                </div>

                <h4>Large Images (Multiscale Gaussian Pyramid)</h4>
                <div class="triple-grid" style="
                  display: flex;
                  flex-wrap: wrap;
                  gap: 16px;
                ">
                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/church.jpg" alt="church"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      church.jpg
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/emir.jpg" alt="emir"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      emir.jpg
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/harvesters.jpg" alt="harvesters"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      harvesters.jpg
                    </figcaption>
                  </figure>
                </div>
                <div class="triple-grid" style="
                  display: flex;
                  flex-wrap: wrap;
                  gap: 16px;
                ">
                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/icon.jpg" alt="icon"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      icon.jpg
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/italil.jpg" alt="italil"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      italil.jpg
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/lastochikino.jpg" alt="lastochikino"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      lastochikino.jpg
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/lugano.jpg" alt="lugano"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      lugano.jpg
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/melons.jpg" alt="melons"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      melons.jpg
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/self_portrait.jpg" alt="self_portrait"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      self_portrait.jpg
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/siren.jpg" alt="siren"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      siren.jpg
                    </figcaption>
                  </figure>

                  <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                    <img src="img/proj1/pyramid/three_generations.jpg" alt="three_generations"
                        style="width: 100%; height: auto; display: block; ">
                    <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                      three_generations.jpg
                    </figcaption>
                  </figure>
                </div>
                <h3>Extra Images from Collection</h3>
                <div class="triple-grid" style="
                display: flex;
                flex-wrap: wrap;
                gap: 16px;
              ">
                <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                  <img src="img/proj1/single_scale/extra_eleven_yurt.jpg" alt="eleven_people"
                      style="width: 100%; height: auto; display: block; ">
                  <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                    eleven_people.jpg
                  </figcaption>
                </figure>

                <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                  <img src="img/proj1/single_scale/extra_embroidered.jpg" alt="embroidered"
                      style="width: 100%; height: auto; display: block; ">
                  <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                    embroidered_pouches.jpg
                  </figcaption>
                </figure>

                <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                  <img src="img/proj1/single_scale/extra_khan.jpg" alt="khan"
                      style="width: 100%; height: auto; display: block; ">
                  <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                    khan.jpg
                  </figcaption>
                </figure>

                <!-- <figure style="flex: 1 1 calc(33.33% - 16px); max-width: calc(33.33% - 16px); margin: 0;">
                  <img src="img/proj1/single_scale/extra_oven.jpg" alt="oven"
                      style="width: 100%; height: auto; display: block; ">
                  <figcaption style="text-align: center; font-style: italic; margin-top: 6px;">
                    oven.jpg
                  </figcaption>
                </figure> -->
                </div>

                

                <h3>Calculated Offsets</h3>
                <table class="offsets-table">
                  <thead>
                    <tr>
                      <th>Image</th>
                      <th>Green offset (dx, dy)</th>
                      <th>Red offset (dx, dy)</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td>cathedral.jpg</td><td>(2, 5)</td><td>(3, 12)</td></tr>
                    <tr><td>monastery.jpg</td><td>(2, -3)</td><td>(2, 3)</td></tr>
                    <tr><td>tobolsk.jpg</td><td>(3, 3)</td><td>(3, 6)</td></tr>
                    <tr><td>church.tif</td><td>(4, 25)</td><td>(-4, 58)</td></tr>
                    <tr><td>emir.tif</td><td>(24, 49)</td><td>(40, 107)</td></tr>
                    <tr><td>harvesters.tif</td><td>(17, 60)</td><td>(13, 124)</td></tr>
                    <tr><td>icon.tif</td><td>(17, 41)</td><td>(23, 89)</td></tr>
                    <tr><td>italil.tif</td><td>(21, 38)</td><td>(35, 77)</td></tr>
                    <tr><td>lastochikino.tif</td><td>(-2, -3)</td><td>(-9, 75)</td></tr>
                    <tr><td>lugano.tif</td><td>(-16, 41)</td><td>(-29, 93)</td></tr>
                    <tr><td>melons.tif</td><td>(10, 81)</td><td>(13, 178)</td></tr>
                    <tr><td>self_portrait.tif</td><td>(29, 79)</td><td>(37, 176)</td></tr>
                    <tr><td>siren.tif</td><td>(-6, 49)</td><td>(-25, 96)</td></tr>
                    <tr><td>three_generations.tif</td><td>(14, 53)</td><td>(11, 111)</td></tr>
                    <tr><td>eleven_yurt.jpg</td><td>(6, 3)</td><td>(13, 5)</td></tr>
                    <tr><td>embroidered.jpg</td><td>(6, 6)</td><td>(11, 9)</td></tr>
                    <tr><td>khan.jpg</td><td>(5, 0)</td><td>(11, -2)</td></tr>
                    <!-- <tr><td>oven.jpg</td><td>(6, 2)</td><td>(13, 4)</td></tr> -->

                  </tbody>
                </table>
              </div>
            </details>

            
            
            
            <p>website template adapted from Kalie's lovely webpage <a href="https://kalieching.github.io/">here.</a></p>
        </div>
    </div>
    <script src="js/app.js"></script>
</body>
</html>